\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ahsansabit}

% Page Shape
\usepackage[margin = 2cm]{geometry}

% Color
\usepackage{xcolor}

\newif \ifdarkbluetheme \darkbluethemefalse
\newif \ifdarkpinktheme \darkpinkthemefalse
\newif \iflightpinktheme \lightpinkthemefalse
\newif \iflightgreentheme \lightgreenthemefalse
\newif \ifmonocolortheme \monocolorthemefalse
\newif \ificmcbtheme \icmcbthemefalse


% Polar Night
\definecolor{NordDarkBlack}   {HTML} {2E3440} % nord0
\definecolor{NordBlack}       {HTML} {3B4252} % nord1
\definecolor{NordMediumBlack} {HTML} {434C5e} % nord2
\definecolor{NordBrightBlack} {HTML} {4C566A} % nord3
% Snow Storm
\definecolor{NordWhite}       {HTML} {E5E9F0} % nord5
\definecolor{NordBrightWhite} {HTML} {ECEFF4} % nord6
% Frost
\definecolor{NordCyan}        {HTML} {8FBCBB} % nord7
\definecolor{NordBrightCyan}  {HTML} {88C0D0} % nord8
\definecolor{NordBlue}        {HTML} {81A1C1} % nord9
\definecolor{NordBrightBlue}  {HTML} {5E81AC} % nord10
% Aurora
\definecolor{NordRed}         {HTML} {BF616A} % nord11
\definecolor{NordOrange}      {HTML} {D08770} % nord12
\definecolor{NordYellow}      {HTML} {EBCB8B} % nord13
\definecolor{NordGreen}       {HTML} {A3BE8C} % nord14
\definecolor{NordMagenta}     {HTML} {B48EAD} % nord15

\definecolor{BestBlack}       {HTML} {17171c}
\definecolor{GunaBlack}       {HTML} {161c23}
\definecolor{BestBlackBright} {HTML} {22222a}

% Cream Color
\definecolor{Rosewater}  {HTML} {d8a7b1}
\definecolor{Spearmint}  {HTML} {b6e2d3}
\definecolor{Cream}      {HTML} {fae8e0}
\definecolor{HotPink}    {HTML} {ef7c8e}
\definecolor{RoseQuartz} {HTML} {fadcd9}
\definecolor{DustyRose}  {HTML} {f8afa6}
\definecolor{Coral}      {HTML} {f79489}
\definecolor{Cinnabar}   {HTML} {e43d40}
\definecolor{BetterRed}  {HTML} {f85c70}

% Water Foam
\definecolor{Teal}       {HTML} {29a0b1}
\definecolor{TealGreen}  {HTML} {167d7f}
\definecolor{Spearmint}  {HTML} {98d7c2}
\definecolor{Mint}       {HTML} {ddffe7}
\definecolor{hgc}        {HTML} {00a6e7}
\definecolor{icmcb_Blue} {HTML} {148d75}

% Summer Splash
\definecolor{BabyBlue}   {HTML} {d4f1f4}
\definecolor{BlueGreen}  {HTML} {75e6da}
\definecolor{BlueGrotto} {HTML} {189ab4}
\definecolor{NavyBlue}   {HTML} {05445e}
\definecolor{Cornflower} {HTML} {4c5270}

% 50 shades of grey
\definecolor{Black}         {HTML} {000000}
\definecolor{Black2}        {HTML} {1a1a1a}
\definecolor{Black3}        {HTML} {262626}
\definecolor{Black4}        {HTML} {404040}
\definecolor{DarkSlateGray} {HTML} {2F4F4F}
\definecolor{SlateGray}     {HTML} {708090}
\definecolor{DimGray}       {HTML} {696969}
\definecolor{DarkGray}      {HTML} {A9A9A9}
\definecolor{LightGray}     {HTML} {bfbfbf}

% Greens
\definecolor{RealGreen}    {HTML} {59981a}
\definecolor{Yellow Green} {HTML} {ecf87f}
\definecolor{Lime Green}   {HTML} {81b622}
\definecolor{Olive Green}  {HTML} {3d550c}
\definecolor{Forest Green} {HTML} {1a4314}

% Gruvbox Palette
\definecolor{G bg}            {HTML}{282828}
\definecolor{G bg1}           {HTML}{3c3836}
\definecolor{G bg2}           {HTML}{504945}
\definecolor{G bg3}           {HTML}{665c54}

\definecolor{G gray}            {HTML}{928374}

\definecolor{G fg1}             {HTML}{ebdbb2}
\definecolor{G fg2}             {HTML}{a89984}

\definecolor{G blue}            {HTML}{83a598}
\definecolor{G dirtblue}        {HTML}{458588}

\definecolor{G red}             {HTML}{fb4934}
\definecolor{G purple}          {HTML}{d3869b}
\definecolor{G aqua}            {HTML}{8ec07c}
\definecolor{G yellow}          {HTML}{fabd2f}
\definecolor{G orange}          {HTML}{fe8019}


\DeclareOption{monocolor}{
    \colorlet{pageC}{white}
    \colorlet{fgC}{black}

    \colorlet{thmC}{Black4}
    \colorlet{probC}{Black3}
    \colorlet{defC}{Black2}
    \colorlet{solC}{fgC}

    \colorlet{thmBgC}{LightGray!40!white}
    \colorlet{probBgC}{LightGray!20!pageC}
    \colorlet{defBgC}{LightGray}

    \colorlet{urlC}{SlateGray}
    \colorlet{linkC}{SlateGray}
    \colorlet{fileC}{SlateGray}
    \colorlet{impC}{SlateGray!80!NordBlue}
}

 \DeclareOption{gruvbox}{
    \colorlet{pageC}{G bg}
    \colorlet{fgC}{G fg1}

    \colorlet{thmC}{G fg2}
    \colorlet{probC}{G blue}
    \colorlet{defC}{G fg2}
    \colorlet{solC}{G fg2}

    \colorlet{thmBgC}{G bg2}
    \colorlet{probBgC}{G bg1}
    \colorlet{defBgC}{G bg2}

    \colorlet{urlC}{G blue}
    \colorlet{linkC}{G dirtblue}
    \colorlet{fileC}{G yellow}
    \colorlet{impC}{G yellow}
}

\DeclareOption{darkBlue}{
    \colorlet{pageC}{BestBlack}
    \colorlet{fgC}{white}

    \colorlet{thmC}{BabyBlue}
    \colorlet{probC}{Teal}
    \colorlet{defC}{BlueGreen}
    \colorlet{solC}{fgC}

    \colorlet{thmBgC}{BestBlackBright}
    \colorlet{probBgC}{BestBlack!98!Teal}
    \colorlet{defBgC}{BestBlackBright}

    \colorlet{urlC}{NordBrightCyan}
    \colorlet{linkC}{NordBrightCyan}
    \colorlet{fileC}{NordBrightCyan}
    \colorlet{impC}{NordCyan!95!NordWhite}
}


\DeclareOption{darkPink}{
    \colorlet{pageC}{BestBlack}
    \colorlet{fgC}{white}

    \colorlet{thmC}{NordRed}
    \colorlet{probC}{Coral}
    \colorlet{defC}{Rosewater}
    \colorlet{solC}{fgC}

    \colorlet{thmBgC}{BestBlackBright!99!HotPink}
    \colorlet{probBgC}{white}
    \colorlet{defBgC}{BestBlackBright!95!HotPink}

    \colorlet{urlC}{Coral}
    \colorlet{linkC}{Coral}
    \colorlet{fileC}{Coral}
    \colorlet{impC}{HotPink!95!BestBlack}
}

\DeclareOption{lightGreen}{
    \colorlet{pageC}{white!90!Yellow Green}
    \colorlet{fgC}{black}

    \colorlet{thmC}{Forest Green}
    \colorlet{probC}{Olive Green}
    \colorlet{defC}{RealGreen}
    \colorlet{solC}{fgC}

    \colorlet{thmBgC}{Forest Green!10!white}
    \colorlet{probBgC}{pageC}
    \colorlet{defBgC}{RealGreen!7}

    \colorlet{urlC}{Lime Green}
    \colorlet{linkC}{Lime Green}
    \colorlet{fileC}{Lime Green}
    \colorlet{impC}{NordGreen!80!fgC}
}

\DeclareOption{lightPink}{
    \colorlet{pageC}{NordBrightWhite!80!white}
    \colorlet{fgC}{black}

    \colorlet{thmC}{HotPink}
    \colorlet{probC}{Coral}
    \colorlet{defC}{NordRed}
    \colorlet{solC}{fgC}

    \colorlet{thmBgC}{NordWhite!97!Coral}
    \colorlet{probBgC}{pageC}
    \colorlet{defBgC}{NordWhite!95!Coral}

    \colorlet{urlC}{Cinnabar}
    \colorlet{linkC}{Cinnabar}
    \colorlet{fileC}{Cinnabar}
    \colorlet{impC}{NordCyan!90!HotPink}
}

\DeclareOption{plain}{
    \colorlet{pageC}{white}
    \colorlet{fgC}{black}

    \colorlet{thmC}{NavyBlue}
    \colorlet{probC}{NordBlack}
    \colorlet{defC}{BlueGrotto}
    \colorlet{solC}{fgC}

    \colorlet{thmBgC}{NordWhite!95!BabyBlue}
    \colorlet{probBgC}{pageC}
    \colorlet{defBgC}{NordWhite!95!NordGreen}

    \colorlet{urlC}{TealGreen}
    \colorlet{linkC}{Teal}
    \colorlet{fileC}{TealGreen}
    \colorlet{impC}{NordBrightBlue!80!fgC}
}

\DeclareOption{icmcb}{
    \colorlet{pageC}{white}
    \colorlet{fgC}{black}

    \colorlet{thmC}{NavyBlue}
    \colorlet{probC}{icmcb_Blue!60!BestBlack}
    \colorlet{defC}{BlueGrotto}
    \colorlet{solC}{fgC}

    \colorlet{thmBgC}{NordWhite!95!BabyBlue}
    \colorlet{probBgC}{icmcb_Blue!10!white}
    \colorlet{defBgC}{NordWhite!95!NordGreen}

    \colorlet{urlC}{icmcb_Blue}
    \colorlet{linkC}{icmcb_Blue}
    \colorlet{fileC}{icmcb_Blue}
    \colorlet{impC}{NordBrightBlue!80!fgC}
}

% Color Section End 

% Font
\newif \iffont \fontfalse
\DeclareOption{fonts}{\fonttrue}




\ProcessOptions\relax




\usepackage{pagecolor}
\pagecolor{pageC} \color{fgC}

\usepackage[most]{tcolorbox}
\usepackage[]{amsthm}
\usepackage[]{thmtools,listings,chngcntr}
\usepackage[]{amssymb,amsmath}


\setlength\parindent{0pt}
\setlength\parskip{10pt}



%font support
\iffont
  \usepackage[T1]{fontenc}
  \usepackage{fontspec}


  \setsansfont{CMU Sans Serif} [Scale=MatchUppercase]
  \setmonofont{Share Tech Mono} [Scale=MatchLowercase]
  \setmainfont{CMU Serif} [Scale=MatchLowercase]

  \newfontfamily\Share [Ligatures=TeX]{Share}
  \newfontfamily\Titillium [Ligatures=TeX]{Titillium Web}
  \newfontfamily\Inconsolata [Ligatures=TeX]{inconsolata}

\else

\usepackage{lmodern}

 \fi




% Environment for Problems
\declaretheoremstyle[
	headfont=\color{probC},
	headpunct={.},
	postheadspace={7pt},
	spaceabove=12pt,
	spacebelow=12pt,
	notebraces={(}{)},
	notefont=\color{probC},
	]{problemstyle}

\tcolorboxenvironment{problem}{
	tile, breakable, colback=probBgC, colframe=probBgC, coltext=fgC,
	left=0.2em,before skip=12pt, after skip=20pt,}
\declaretheorem[style=problemstyle]{problem}
\newtheorem*{problem*}{Problem}

\newcommand{\pr}[1]{
    \begin{problem}
        #1
    \end{problem}
}


% Environment for Theorem
\declaretheoremstyle[
	headfont=\color{thmC},
	headpunct={.},
	postheadspace={7pt},
	spaceabove=12pt,
	spacebelow=12pt,
	notebraces={(}{)},
	notefont=\color{thmC},
	]{thmstyle}

\tcolorboxenvironment{thm}{
	tile, breakable, colback=thmBgC, colframe=thmBgC, coltext=fgC,
	left=0.2em,before skip=15pt, after skip=20pt}
	\declaretheorem[name={Theorem}, style=thmstyle]{thm}


\newcommand{\theo}[1]{
    \begin{thm}
        #1
    \end{thm}
    \

}

%note environment
\declaretheoremstyle[
headfont=\bfseries\color{fgC},
    headpunct={ },
    postheadspace={5pt},
    spaceabove=5pt,
    spacebelow=5pt,
    notebraces={ }{ },
    notefont=\color{cyan},
    ]{notestyle}

\tcolorboxenvironment{note}{
    tile, breakable, colback=pageC, colframe=probBgC, coltext=defC,
left=1em, before skip= 12pt, after skip = 22pt,}

\declaretheorem[style=notestyle, numbered=no]{note}
\newtheorem{note*}{Note}

\newcommand{\nt}[1]{
    \begin{note} \begin{small}
        #1
    \end{small} \end{note}
}




%environment for solution
\declaretheoremstyle[
headfont=\bfseries\color{solC},
notebraces={[}{]},
notefont=\normalfont,
headpunct={. },
spaceabove=4pt,
spacebelow=10pt,
qed=\qedsymbol,
% bodyfont=\color{solC!80!pageC},
]{solutionstyle}

\declaretheorem[style=solutionstyle, numbered=no]{solution}

\tcolorboxenvironment{solution}{
          coltext=fgC!96!pageC, tile, breakable, colback=pageC,
          top=0pt, left=.7em, right=.7em,
          before skip=0pt,after skip=35pt,borderline west={.1em}{0pt}{solC},
      }

\newtheorem{solution*}{Solution}

\newcommand{\solu}[1]{
\begin{solution}
#1
\end{solution}}



%environment for solution
\declaretheoremstyle[
headfont=\bfseries\color{solC},
notebraces={[}{]},
notefont=\normalfont,
headpunct={. },
spaceabove=4pt,
spacebelow=10pt,
qed=\qedsymbol,
% bodyfont=\color{solC!80!pageC},
]{proofstyle}

\declaretheorem[name={Proof}, style=proofstyle, numbered=no]{prf}

\tcolorboxenvironment{prf}{
          coltext=fgC!96!pageC, tile, breakable, colback=pageC,
          top=0pt, left=.7em, right=.7em,
          before skip=0pt,after skip=35pt,borderline west={.1em}{0pt}{solC},
      }



\newcommand{\pf}[1]{
\begin{prf}
#1
\end{prf}
}

% Environment for Derivation
\tcolorboxenvironment{derivation}{
	tile, breakable, colback=probBgC!90!pageC, colframe=probBgC, coltext=fgC,
	left=0.2em,before skip=12pt, after skip=0pt,
borderline west={0.1em}{0pt}{G aqua},
borderline south={0.05em}{0pt}{gray!50!pageC}
  }


\declaretheorem[style=derivationstyle, numbered=no]{derivation}
\newtheorem*{derivation*}{Derivation}




\iffont
\newenvironment{derivationmath}{
\tcolorbox[{tile, breakable,
before skip=0pt,after skip=20pt,
left=0.4em,coltext=fgC, colback=probBgC!60!pageC,
borderline west={0.1em}{0pt}{cyan}}]
}
{\endtcolorbox}

\newcommand{\derive}[2]{%
\begin{derivation}
{\Titillium
    #1 }
\end{derivation}
\begin{derivationmath}
    #2
\end{derivationmath}
}


\declaretheoremstyle[
	headfont=\bfseries\Titillium\color{G aqua},
	headpunct={},
	postheadspace={5pt},
	spaceabove=12pt,
	spacebelow=12pt,
	notebraces={(}{)},
	notefont=\color{probC},
	]{derivationstyle}

\else
\newenvironment{derivationmath}{
\tcolorbox[{tile, breakable,
before skip=0pt,after skip=20pt,
left=0.4em,coltext=fgC, colback=probBgC!60!pageC,
borderline west={0.1em}{0pt}{cyan}}]
}
{\endtcolorbox}

\newcommand{\derive}[2]{%
\begin{derivation}
{ #1 }
\end{derivation}
\begin{derivationmath}
    #2
\end{derivationmath}
}

\declaretheoremstyle[
	headfont=\bfseries\color{G aqua},
	headpunct={},
	postheadspace={5pt},
	spaceabove=12pt,
	spacebelow=12pt,
	notebraces={(}{)},
	notefont=\color{probC},
	]{derivationstyle}

\fi



% Environment for Definition
\declaretheoremstyle[
	headfont=\color{defC},
	headpunct={.},
	postheadspace={7pt},
	spaceabove=12pt,
	spacebelow=12pt,
	notebraces={(}{)},
	notefont=\color{defC},
	]{defstyle}

\tcolorboxenvironment{dfn}{
	sharpish corners, breakable, colback=defBgC, colframe=fgC, coltext=fgC,
	left=0.2em,before skip=12pt, after skip=20pt,boxrule=0.6pt}

\declaretheorem[name={Definition}, style=defstyle]{dfn}


\newcommand{\df}[1]{
    \begin{dfn}
        #1
    \end{dfn}
}


%environment for Aim

\newcommand{\aime}[1]{
\begin{tcolorbox}[%
        before skip=30 pt,%
        after skip=20 pt,%
        left=0.4em,%
        coltext=fgC,%
        colback=thmBgC,%
        colframe=G aqua,%
        sharpish corners]
        \textsf{What are we doing:} #1
\end{tcolorbox}
}


% Cute Title 
\renewcommand*{\maketitle}{%
{\sffamily\huge\raggedright\@title\unskip\strut\par}
{\sffamily\large\@date\par}
{\sffamily\large\@author\par}
\vspace{1cm}

}




% diagram support (https://castel.dev)
\usepackage[]{import}
\newcommand{\incfig}[1]{%
\def\svgwidth{\columnwidth}
\import{./figures/}{#1.pdf_tex}
}
